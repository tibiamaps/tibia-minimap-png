import { saveChunk } from './save.mjs';

// `identify -verbose tests/fixtures/Minimap_Color_32256_32000_7.png`
const colorMap = new Map([
	[0x00, { r: 0x00, g: 0x00, b: 0x00 }],
	[0x01, { r: 0x00, g: 0x00, b: 0x33 }],
	[0x02, { r: 0x00, g: 0x00, b: 0x66 }],
	[0x03, { r: 0x00, g: 0x00, b: 0x99 }],
	[0x04, { r: 0x00, g: 0x00, b: 0xCC }],
	[0x05, { r: 0x00, g: 0x00, b: 0xFF }],
	[0x06, { r: 0x00, g: 0x33, b: 0x00 }],
	[0x07, { r: 0x00, g: 0x33, b: 0x33 }],
	[0x08, { r: 0x00, g: 0x33, b: 0x66 }],
	[0x09, { r: 0x00, g: 0x33, b: 0x99 }],
	[0x0A, { r: 0x00, g: 0x33, b: 0xCC }],
	[0x0B, { r: 0x00, g: 0x33, b: 0xFF }],
	[0x0C, { r: 0x00, g: 0x66, b: 0x00 }],
	[0x0D, { r: 0x00, g: 0x66, b: 0x33 }],
	[0x0E, { r: 0x00, g: 0x66, b: 0x66 }],
	[0x0F, { r: 0x00, g: 0x66, b: 0x99 }],
	[0x10, { r: 0x00, g: 0x66, b: 0xCC }],
	[0x11, { r: 0x00, g: 0x66, b: 0xFF }],
	[0x12, { r: 0x00, g: 0x99, b: 0x00 }],
	[0x13, { r: 0x00, g: 0x99, b: 0x33 }],
	[0x14, { r: 0x00, g: 0x99, b: 0x66 }],
	[0x15, { r: 0x00, g: 0x99, b: 0x99 }],
	[0x16, { r: 0x00, g: 0x99, b: 0xCC }],
	[0x17, { r: 0x00, g: 0x99, b: 0xFF }],
	[0x18, { r: 0x00, g: 0xCC, b: 0x00 }],
	[0x19, { r: 0x00, g: 0xCC, b: 0x33 }],
	[0x1A, { r: 0x00, g: 0xCC, b: 0x66 }],
	[0x1B, { r: 0x00, g: 0xCC, b: 0x99 }],
	[0x1C, { r: 0x00, g: 0xCC, b: 0xCC }],
	[0x1D, { r: 0x00, g: 0xCC, b: 0xFF }],
	[0x1E, { r: 0x00, g: 0xFF, b: 0x00 }],
	[0x1F, { r: 0x00, g: 0xFF, b: 0x33 }],
	[0x20, { r: 0x00, g: 0xFF, b: 0x66 }],
	[0x21, { r: 0x00, g: 0xFF, b: 0x99 }],
	[0x22, { r: 0x00, g: 0xFF, b: 0xCC }],
	[0x23, { r: 0x00, g: 0xFF, b: 0xFF }],
	[0x24, { r: 0x33, g: 0x00, b: 0x00 }],
	[0x25, { r: 0x33, g: 0x00, b: 0x33 }],
	[0x26, { r: 0x33, g: 0x00, b: 0x66 }],
	[0x27, { r: 0x33, g: 0x00, b: 0x99 }],
	[0x28, { r: 0x33, g: 0x00, b: 0xCC }],
	[0x29, { r: 0x33, g: 0x00, b: 0xFF }],
	[0x2A, { r: 0x33, g: 0x33, b: 0x00 }],
	[0x2B, { r: 0x33, g: 0x33, b: 0x33 }],
	[0x2C, { r: 0x33, g: 0x33, b: 0x66 }],
	[0x2D, { r: 0x33, g: 0x33, b: 0x99 }],
	[0x2E, { r: 0x33, g: 0x33, b: 0xCC }],
	[0x2F, { r: 0x33, g: 0x33, b: 0xFF }],
	[0x30, { r: 0x33, g: 0x66, b: 0x00 }],
	[0x31, { r: 0x33, g: 0x66, b: 0x33 }],
	[0x32, { r: 0x33, g: 0x66, b: 0x66 }],
	[0x33, { r: 0x33, g: 0x66, b: 0x99 }],
	[0x34, { r: 0x33, g: 0x66, b: 0xCC }],
	[0x35, { r: 0x33, g: 0x66, b: 0xFF }],
	[0x36, { r: 0x33, g: 0x99, b: 0x00 }],
	[0x37, { r: 0x33, g: 0x99, b: 0x33 }],
	[0x38, { r: 0x33, g: 0x99, b: 0x66 }],
	[0x39, { r: 0x33, g: 0x99, b: 0x99 }],
	[0x3A, { r: 0x33, g: 0x99, b: 0xCC }],
	[0x3B, { r: 0x33, g: 0x99, b: 0xFF }],
	[0x3C, { r: 0x33, g: 0xCC, b: 0x00 }],
	[0x3D, { r: 0x33, g: 0xCC, b: 0x33 }],
	[0x3E, { r: 0x33, g: 0xCC, b: 0x66 }],
	[0x3F, { r: 0x33, g: 0xCC, b: 0x99 }],
	[0x40, { r: 0x33, g: 0xCC, b: 0xCC }],
	[0x41, { r: 0x33, g: 0xCC, b: 0xFF }],
	[0x42, { r: 0x33, g: 0xFF, b: 0x00 }],
	[0x43, { r: 0x33, g: 0xFF, b: 0x33 }],
	[0x44, { r: 0x33, g: 0xFF, b: 0x66 }],
	[0x45, { r: 0x33, g: 0xFF, b: 0x99 }],
	[0x46, { r: 0x33, g: 0xFF, b: 0xCC }],
	[0x47, { r: 0x33, g: 0xFF, b: 0xFF }],
	[0x48, { r: 0x66, g: 0x00, b: 0x00 }],
	[0x49, { r: 0x66, g: 0x00, b: 0x33 }],
	[0x4A, { r: 0x66, g: 0x00, b: 0x66 }],
	[0x4B, { r: 0x66, g: 0x00, b: 0x99 }],
	[0x4C, { r: 0x66, g: 0x00, b: 0xCC }],
	[0x4D, { r: 0x66, g: 0x00, b: 0xFF }],
	[0x4E, { r: 0x66, g: 0x33, b: 0x00 }],
	[0x4F, { r: 0x66, g: 0x33, b: 0x33 }],
	[0x50, { r: 0x66, g: 0x33, b: 0x66 }],
	[0x51, { r: 0x66, g: 0x33, b: 0x99 }],
	[0x52, { r: 0x66, g: 0x33, b: 0xCC }],
	[0x53, { r: 0x66, g: 0x33, b: 0xFF }],
	[0x54, { r: 0x66, g: 0x66, b: 0x00 }],
	[0x55, { r: 0x66, g: 0x66, b: 0x33 }],
	[0x56, { r: 0x66, g: 0x66, b: 0x66 }],
	[0x57, { r: 0x66, g: 0x66, b: 0x99 }],
	[0x58, { r: 0x66, g: 0x66, b: 0xCC }],
	[0x59, { r: 0x66, g: 0x66, b: 0xFF }],
	[0x5A, { r: 0x66, g: 0x99, b: 0x00 }],
	[0x5B, { r: 0x66, g: 0x99, b: 0x33 }],
	[0x5C, { r: 0x66, g: 0x99, b: 0x66 }],
	[0x5D, { r: 0x66, g: 0x99, b: 0x99 }],
	[0x5E, { r: 0x66, g: 0x99, b: 0xCC }],
	[0x5F, { r: 0x66, g: 0x99, b: 0xFF }],
	[0x60, { r: 0x66, g: 0xCC, b: 0x00 }],
	[0x61, { r: 0x66, g: 0xCC, b: 0x33 }],
	[0x62, { r: 0x66, g: 0xCC, b: 0x66 }],
	[0x63, { r: 0x66, g: 0xCC, b: 0x99 }],
	[0x64, { r: 0x66, g: 0xCC, b: 0xCC }],
	[0x65, { r: 0x66, g: 0xCC, b: 0xFF }],
	[0x66, { r: 0x66, g: 0xFF, b: 0x00 }],
	[0x67, { r: 0x66, g: 0xFF, b: 0x33 }],
	[0x68, { r: 0x66, g: 0xFF, b: 0x66 }],
	[0x69, { r: 0x66, g: 0xFF, b: 0x99 }],
	[0x6A, { r: 0x66, g: 0xFF, b: 0xCC }],
	[0x6B, { r: 0x66, g: 0xFF, b: 0xFF }],
	[0x6C, { r: 0x99, g: 0x00, b: 0x00 }],
	[0x6D, { r: 0x99, g: 0x00, b: 0x33 }],
	[0x6E, { r: 0x99, g: 0x00, b: 0x66 }],
	[0x6F, { r: 0x99, g: 0x00, b: 0x99 }],
	[0x70, { r: 0x99, g: 0x00, b: 0xCC }],
	[0x71, { r: 0x99, g: 0x00, b: 0xFF }],
	[0x72, { r: 0x99, g: 0x33, b: 0x00 }],
	[0x73, { r: 0x99, g: 0x33, b: 0x33 }],
	[0x74, { r: 0x99, g: 0x33, b: 0x66 }],
	[0x75, { r: 0x99, g: 0x33, b: 0x99 }],
	[0x76, { r: 0x99, g: 0x33, b: 0xCC }],
	[0x77, { r: 0x99, g: 0x33, b: 0xFF }],
	[0x78, { r: 0x99, g: 0x66, b: 0x00 }],
	[0x79, { r: 0x99, g: 0x66, b: 0x33 }],
	[0x7A, { r: 0x99, g: 0x66, b: 0x66 }],
	[0x7B, { r: 0x99, g: 0x66, b: 0x99 }],
	[0x7C, { r: 0x99, g: 0x66, b: 0xCC }],
	[0x7D, { r: 0x99, g: 0x66, b: 0xFF }],
	[0x7E, { r: 0x99, g: 0x99, b: 0x00 }],
	[0x7F, { r: 0x99, g: 0x99, b: 0x33 }],
	[0x80, { r: 0x99, g: 0x99, b: 0x66 }],
	[0x81, { r: 0x99, g: 0x99, b: 0x99 }],
	[0x82, { r: 0x99, g: 0x99, b: 0xCC }],
	[0x83, { r: 0x99, g: 0x99, b: 0xFF }],
	[0x84, { r: 0x99, g: 0xCC, b: 0x00 }],
	[0x85, { r: 0x99, g: 0xCC, b: 0x33 }],
	[0x86, { r: 0x99, g: 0xCC, b: 0x66 }],
	[0x87, { r: 0x99, g: 0xCC, b: 0x99 }],
	[0x88, { r: 0x99, g: 0xCC, b: 0xCC }],
	[0x89, { r: 0x99, g: 0xCC, b: 0xFF }],
	[0x8A, { r: 0x99, g: 0xFF, b: 0x00 }],
	[0x8B, { r: 0x99, g: 0xFF, b: 0x33 }],
	[0x8C, { r: 0x99, g: 0xFF, b: 0x66 }],
	[0x8D, { r: 0x99, g: 0xFF, b: 0x99 }],
	[0x8E, { r: 0x99, g: 0xFF, b: 0xCC }],
	[0x8F, { r: 0x99, g: 0xFF, b: 0xFF }],
	[0x90, { r: 0xCC, g: 0x00, b: 0x00 }],
	[0x91, { r: 0xCC, g: 0x00, b: 0x33 }],
	[0x92, { r: 0xCC, g: 0x00, b: 0x66 }],
	[0x93, { r: 0xCC, g: 0x00, b: 0x99 }],
	[0x94, { r: 0xCC, g: 0x00, b: 0xCC }],
	[0x95, { r: 0xCC, g: 0x00, b: 0xFF }],
	[0x96, { r: 0xCC, g: 0x33, b: 0x00 }],
	[0x97, { r: 0xCC, g: 0x33, b: 0x33 }],
	[0x98, { r: 0xCC, g: 0x33, b: 0x66 }],
	[0x99, { r: 0xCC, g: 0x33, b: 0x99 }],
	[0x9A, { r: 0xCC, g: 0x33, b: 0xCC }],
	[0x9B, { r: 0xCC, g: 0x33, b: 0xFF }],
	[0x9C, { r: 0xCC, g: 0x66, b: 0x00 }],
	[0x9D, { r: 0xCC, g: 0x66, b: 0x33 }],
	[0x9E, { r: 0xCC, g: 0x66, b: 0x66 }],
	[0x9F, { r: 0xCC, g: 0x66, b: 0x99 }],
	[0xA0, { r: 0xCC, g: 0x66, b: 0xCC }],
	[0xA1, { r: 0xCC, g: 0x66, b: 0xFF }],
	[0xA2, { r: 0xCC, g: 0x99, b: 0x00 }],
	[0xA3, { r: 0xCC, g: 0x99, b: 0x33 }],
	[0xA4, { r: 0xCC, g: 0x99, b: 0x66 }],
	[0xA5, { r: 0xCC, g: 0x99, b: 0x99 }],
	[0xA6, { r: 0xCC, g: 0x99, b: 0xCC }],
	[0xA7, { r: 0xCC, g: 0x99, b: 0xFF }],
	[0xA8, { r: 0xCC, g: 0xCC, b: 0x00 }],
	[0xA9, { r: 0xCC, g: 0xCC, b: 0x33 }],
	[0xAA, { r: 0xCC, g: 0xCC, b: 0x66 }],
	[0xAB, { r: 0xCC, g: 0xCC, b: 0x99 }],
	[0xAC, { r: 0xCC, g: 0xCC, b: 0xCC }],
	[0xAD, { r: 0xCC, g: 0xCC, b: 0xFF }],
	[0xAE, { r: 0xCC, g: 0xFF, b: 0x00 }],
	[0xAF, { r: 0xCC, g: 0xFF, b: 0x33 }],
	[0xB0, { r: 0xCC, g: 0xFF, b: 0x66 }],
	[0xB1, { r: 0xCC, g: 0xFF, b: 0x99 }],
	[0xB2, { r: 0xCC, g: 0xFF, b: 0xCC }],
	[0xB3, { r: 0xCC, g: 0xFF, b: 0xFF }],
	[0xB4, { r: 0xFF, g: 0x00, b: 0x00 }],
	[0xB5, { r: 0xFF, g: 0x00, b: 0x33 }],
	[0xB6, { r: 0xFF, g: 0x00, b: 0x66 }],
	[0xB7, { r: 0xFF, g: 0x00, b: 0x99 }],
	[0xB8, { r: 0xFF, g: 0x00, b: 0xCC }],
	[0xB9, { r: 0xFF, g: 0x00, b: 0xFF }],
	[0xBA, { r: 0xFF, g: 0x33, b: 0x00 }],
	[0xBB, { r: 0xFF, g: 0x33, b: 0x33 }],
	[0xBC, { r: 0xFF, g: 0x33, b: 0x66 }],
	[0xBD, { r: 0xFF, g: 0x33, b: 0x99 }],
	[0xBE, { r: 0xFF, g: 0x33, b: 0xCC }],
	[0xBF, { r: 0xFF, g: 0x33, b: 0xFF }],
	[0xC0, { r: 0xFF, g: 0x66, b: 0x00 }],
	[0xC1, { r: 0xFF, g: 0x66, b: 0x33 }],
	[0xC2, { r: 0xFF, g: 0x66, b: 0x66 }],
	[0xC3, { r: 0xFF, g: 0x66, b: 0x99 }],
	[0xC4, { r: 0xFF, g: 0x66, b: 0xCC }],
	[0xC5, { r: 0xFF, g: 0x66, b: 0xFF }],
	[0xC6, { r: 0xFF, g: 0x99, b: 0x00 }],
	[0xC7, { r: 0xFF, g: 0x99, b: 0x33 }],
	[0xC8, { r: 0xFF, g: 0x99, b: 0x66 }],
	[0xC9, { r: 0xFF, g: 0x99, b: 0x99 }],
	[0xCA, { r: 0xFF, g: 0x99, b: 0xCC }],
	[0xCB, { r: 0xFF, g: 0x99, b: 0xFF }],
	[0xCC, { r: 0xFF, g: 0xCC, b: 0x00 }],
	[0xCD, { r: 0xFF, g: 0xCC, b: 0x33 }],
	[0xCE, { r: 0xFF, g: 0xCC, b: 0x66 }],
	[0xCF, { r: 0xFF, g: 0xCC, b: 0x99 }],
	[0xD0, { r: 0xFF, g: 0xCC, b: 0xCC }],
	[0xD1, { r: 0xFF, g: 0xCC, b: 0xFF }],
	[0xD2, { r: 0xFF, g: 0xFF, b: 0x00 }],
	[0xD3, { r: 0xFF, g: 0xFF, b: 0x33 }],
	[0xD4, { r: 0xFF, g: 0xFF, b: 0x66 }],
	[0xD5, { r: 0xFF, g: 0xFF, b: 0x99 }],
	[0xD6, { r: 0xFF, g: 0xFF, b: 0xCC }],
	[0xD7, { r: 0xFF, g: 0xFF, b: 0xFF }],
	[0xD8, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xD9, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xDA, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xDB, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xDC, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xDD, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xDE, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xDF, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE0, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE1, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE2, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE3, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE4, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE5, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE6, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE7, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE8, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xE9, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xEA, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xEB, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xEC, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xED, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xEE, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xEF, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF0, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF1, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF2, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF3, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF4, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF5, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF6, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF7, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF8, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xF9, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xFA, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xFB, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xFC, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xFD, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xFE, { r: 0x00, g: 0x00, b: 0x00 }],
	[0xFF, { r: 0x00, g: 0x00, b: 0x00 }],
]);

// https://www.w3.org/TR/PNG/#11PLTE
const bytes = [];
for (const [index, { r, g, b }] of colorMap) {
	bytes.push(r, g, b);
}

saveChunk({
	buffer: Buffer.from(bytes),
	chunkName: 'PLTE',
	fileName: 'plte-color',
});
