import { saveChunk } from './save.mjs';

// `identify -verbose tests/fixtures/Minimap_WaypointCost_32256_32000_7.png`
const colorMap = new Map([
	[0x00, { r: 0x00, g: 0x00, b: 0x00 }],
	[0x01, { r: 0x01, g: 0x01, b: 0x01 }],
	[0x02, { r: 0x02, g: 0x02, b: 0x02 }],
	[0x03, { r: 0x03, g: 0x03, b: 0x03 }],
	[0x04, { r: 0x04, g: 0x04, b: 0x04 }],
	[0x05, { r: 0x05, g: 0x05, b: 0x05 }],
	[0x06, { r: 0x06, g: 0x06, b: 0x06 }],
	[0x07, { r: 0x07, g: 0x07, b: 0x07 }],
	[0x08, { r: 0x08, g: 0x08, b: 0x08 }],
	[0x09, { r: 0x09, g: 0x09, b: 0x09 }],
	[0x0A, { r: 0x0A, g: 0x0A, b: 0x0A }],
	[0x0B, { r: 0x0B, g: 0x0B, b: 0x0B }],
	[0x0C, { r: 0x0C, g: 0x0C, b: 0x0C }],
	[0x0D, { r: 0x0D, g: 0x0D, b: 0x0D }],
	[0x0E, { r: 0x0E, g: 0x0E, b: 0x0E }],
	[0x0F, { r: 0x0F, g: 0x0F, b: 0x0F }],
	[0x10, { r: 0x10, g: 0x10, b: 0x10 }],
	[0x11, { r: 0x11, g: 0x11, b: 0x11 }],
	[0x12, { r: 0x12, g: 0x12, b: 0x12 }],
	[0x13, { r: 0x13, g: 0x13, b: 0x13 }],
	[0x14, { r: 0x14, g: 0x14, b: 0x14 }],
	[0x15, { r: 0x15, g: 0x15, b: 0x15 }],
	[0x16, { r: 0x16, g: 0x16, b: 0x16 }],
	[0x17, { r: 0x17, g: 0x17, b: 0x17 }],
	[0x18, { r: 0x18, g: 0x18, b: 0x18 }],
	[0x19, { r: 0x19, g: 0x19, b: 0x19 }],
	[0x1A, { r: 0x1A, g: 0x1A, b: 0x1A }],
	[0x1B, { r: 0x1B, g: 0x1B, b: 0x1B }],
	[0x1C, { r: 0x1C, g: 0x1C, b: 0x1C }],
	[0x1D, { r: 0x1D, g: 0x1D, b: 0x1D }],
	[0x1E, { r: 0x1E, g: 0x1E, b: 0x1E }],
	[0x1F, { r: 0x1F, g: 0x1F, b: 0x1F }],
	[0x20, { r: 0x20, g: 0x20, b: 0x20 }],
	[0x21, { r: 0x21, g: 0x21, b: 0x21 }],
	[0x22, { r: 0x22, g: 0x22, b: 0x22 }],
	[0x23, { r: 0x23, g: 0x23, b: 0x23 }],
	[0x24, { r: 0x24, g: 0x24, b: 0x24 }],
	[0x25, { r: 0x25, g: 0x25, b: 0x25 }],
	[0x26, { r: 0x26, g: 0x26, b: 0x26 }],
	[0x27, { r: 0x27, g: 0x27, b: 0x27 }],
	[0x28, { r: 0x28, g: 0x28, b: 0x28 }],
	[0x29, { r: 0x29, g: 0x29, b: 0x29 }],
	[0x2A, { r: 0x2A, g: 0x2A, b: 0x2A }],
	[0x2B, { r: 0x2B, g: 0x2B, b: 0x2B }],
	[0x2C, { r: 0x2C, g: 0x2C, b: 0x2C }],
	[0x2D, { r: 0x2D, g: 0x2D, b: 0x2D }],
	[0x2E, { r: 0x2E, g: 0x2E, b: 0x2E }],
	[0x2F, { r: 0x2F, g: 0x2F, b: 0x2F }],
	[0x30, { r: 0x30, g: 0x30, b: 0x30 }],
	[0x31, { r: 0x31, g: 0x31, b: 0x31 }],
	[0x32, { r: 0x32, g: 0x32, b: 0x32 }],
	[0x33, { r: 0x33, g: 0x33, b: 0x33 }],
	[0x34, { r: 0x34, g: 0x34, b: 0x34 }],
	[0x35, { r: 0x35, g: 0x35, b: 0x35 }],
	[0x36, { r: 0x36, g: 0x36, b: 0x36 }],
	[0x37, { r: 0x37, g: 0x37, b: 0x37 }],
	[0x38, { r: 0x38, g: 0x38, b: 0x38 }],
	[0x39, { r: 0x39, g: 0x39, b: 0x39 }],
	[0x3A, { r: 0x3A, g: 0x3A, b: 0x3A }],
	[0x3B, { r: 0x3B, g: 0x3B, b: 0x3B }],
	[0x3C, { r: 0x3C, g: 0x3C, b: 0x3C }],
	[0x3D, { r: 0x3D, g: 0x3D, b: 0x3D }],
	[0x3E, { r: 0x3E, g: 0x3E, b: 0x3E }],
	[0x3F, { r: 0x3F, g: 0x3F, b: 0x3F }],
	[0x40, { r: 0x40, g: 0x40, b: 0x40 }],
	[0x41, { r: 0x41, g: 0x41, b: 0x41 }],
	[0x42, { r: 0x42, g: 0x42, b: 0x42 }],
	[0x43, { r: 0x43, g: 0x43, b: 0x43 }],
	[0x44, { r: 0x44, g: 0x44, b: 0x44 }],
	[0x45, { r: 0x45, g: 0x45, b: 0x45 }],
	[0x46, { r: 0x46, g: 0x46, b: 0x46 }],
	[0x47, { r: 0x47, g: 0x47, b: 0x47 }],
	[0x48, { r: 0x48, g: 0x48, b: 0x48 }],
	[0x49, { r: 0x49, g: 0x49, b: 0x49 }],
	[0x4A, { r: 0x4A, g: 0x4A, b: 0x4A }],
	[0x4B, { r: 0x4B, g: 0x4B, b: 0x4B }],
	[0x4C, { r: 0x4C, g: 0x4C, b: 0x4C }],
	[0x4D, { r: 0x4D, g: 0x4D, b: 0x4D }],
	[0x4E, { r: 0x4E, g: 0x4E, b: 0x4E }],
	[0x4F, { r: 0x4F, g: 0x4F, b: 0x4F }],
	[0x50, { r: 0x50, g: 0x50, b: 0x50 }],
	[0x51, { r: 0x51, g: 0x51, b: 0x51 }],
	[0x52, { r: 0x52, g: 0x52, b: 0x52 }],
	[0x53, { r: 0x53, g: 0x53, b: 0x53 }],
	[0x54, { r: 0x54, g: 0x54, b: 0x54 }],
	[0x55, { r: 0x55, g: 0x55, b: 0x55 }],
	[0x56, { r: 0x56, g: 0x56, b: 0x56 }],
	[0x57, { r: 0x57, g: 0x57, b: 0x57 }],
	[0x58, { r: 0x58, g: 0x58, b: 0x58 }],
	[0x59, { r: 0x59, g: 0x59, b: 0x59 }],
	[0x5A, { r: 0x5A, g: 0x5A, b: 0x5A }],
	[0x5B, { r: 0x5B, g: 0x5B, b: 0x5B }],
	[0x5C, { r: 0x5C, g: 0x5C, b: 0x5C }],
	[0x5D, { r: 0x5D, g: 0x5D, b: 0x5D }],
	[0x5E, { r: 0x5E, g: 0x5E, b: 0x5E }],
	[0x5F, { r: 0x5F, g: 0x5F, b: 0x5F }],
	[0x60, { r: 0x60, g: 0x60, b: 0x60 }],
	[0x61, { r: 0x61, g: 0x61, b: 0x61 }],
	[0x62, { r: 0x62, g: 0x62, b: 0x62 }],
	[0x63, { r: 0x63, g: 0x63, b: 0x63 }],
	[0x64, { r: 0x64, g: 0x64, b: 0x64 }],
	[0x65, { r: 0x65, g: 0x65, b: 0x65 }],
	[0x66, { r: 0x66, g: 0x66, b: 0x66 }],
	[0x67, { r: 0x67, g: 0x67, b: 0x67 }],
	[0x68, { r: 0x68, g: 0x68, b: 0x68 }],
	[0x69, { r: 0x69, g: 0x69, b: 0x69 }],
	[0x6A, { r: 0x6A, g: 0x6A, b: 0x6A }],
	[0x6B, { r: 0x6B, g: 0x6B, b: 0x6B }],
	[0x6C, { r: 0x6C, g: 0x6C, b: 0x6C }],
	[0x6D, { r: 0x6D, g: 0x6D, b: 0x6D }],
	[0x6E, { r: 0x6E, g: 0x6E, b: 0x6E }],
	[0x6F, { r: 0x6F, g: 0x6F, b: 0x6F }],
	[0x70, { r: 0x70, g: 0x70, b: 0x70 }],
	[0x71, { r: 0x71, g: 0x71, b: 0x71 }],
	[0x72, { r: 0x72, g: 0x72, b: 0x72 }],
	[0x73, { r: 0x73, g: 0x73, b: 0x73 }],
	[0x74, { r: 0x74, g: 0x74, b: 0x74 }],
	[0x75, { r: 0x75, g: 0x75, b: 0x75 }],
	[0x76, { r: 0x76, g: 0x76, b: 0x76 }],
	[0x77, { r: 0x77, g: 0x77, b: 0x77 }],
	[0x78, { r: 0x78, g: 0x78, b: 0x78 }],
	[0x79, { r: 0x79, g: 0x79, b: 0x79 }],
	[0x7A, { r: 0x7A, g: 0x7A, b: 0x7A }],
	[0x7B, { r: 0x7B, g: 0x7B, b: 0x7B }],
	[0x7C, { r: 0x7C, g: 0x7C, b: 0x7C }],
	[0x7D, { r: 0x7D, g: 0x7D, b: 0x7D }],
	[0x7E, { r: 0x7E, g: 0x7E, b: 0x7E }],
	[0x7F, { r: 0x7F, g: 0x7F, b: 0x7F }],
	[0x80, { r: 0x80, g: 0x80, b: 0x80 }],
	[0x81, { r: 0x81, g: 0x81, b: 0x81 }],
	[0x82, { r: 0x82, g: 0x82, b: 0x82 }],
	[0x83, { r: 0x83, g: 0x83, b: 0x83 }],
	[0x84, { r: 0x84, g: 0x84, b: 0x84 }],
	[0x85, { r: 0x85, g: 0x85, b: 0x85 }],
	[0x86, { r: 0x86, g: 0x86, b: 0x86 }],
	[0x87, { r: 0x87, g: 0x87, b: 0x87 }],
	[0x88, { r: 0x88, g: 0x88, b: 0x88 }],
	[0x89, { r: 0x89, g: 0x89, b: 0x89 }],
	[0x8A, { r: 0x8A, g: 0x8A, b: 0x8A }],
	[0x8B, { r: 0x8B, g: 0x8B, b: 0x8B }],
	[0x8C, { r: 0x8C, g: 0x8C, b: 0x8C }],
	[0x8D, { r: 0x8D, g: 0x8D, b: 0x8D }],
	[0x8E, { r: 0x8E, g: 0x8E, b: 0x8E }],
	[0x8F, { r: 0x8F, g: 0x8F, b: 0x8F }],
	[0x90, { r: 0x90, g: 0x90, b: 0x90 }],
	[0x91, { r: 0x91, g: 0x91, b: 0x91 }],
	[0x92, { r: 0x92, g: 0x92, b: 0x92 }],
	[0x93, { r: 0x93, g: 0x93, b: 0x93 }],
	[0x94, { r: 0x94, g: 0x94, b: 0x94 }],
	[0x95, { r: 0x95, g: 0x95, b: 0x95 }],
	[0x96, { r: 0x96, g: 0x96, b: 0x96 }],
	[0x97, { r: 0x97, g: 0x97, b: 0x97 }],
	[0x98, { r: 0x98, g: 0x98, b: 0x98 }],
	[0x99, { r: 0x99, g: 0x99, b: 0x99 }],
	[0x9A, { r: 0x9A, g: 0x9A, b: 0x9A }],
	[0x9B, { r: 0x9B, g: 0x9B, b: 0x9B }],
	[0x9C, { r: 0x9C, g: 0x9C, b: 0x9C }],
	[0x9D, { r: 0x9D, g: 0x9D, b: 0x9D }],
	[0x9E, { r: 0x9E, g: 0x9E, b: 0x9E }],
	[0x9F, { r: 0x9F, g: 0x9F, b: 0x9F }],
	[0xA0, { r: 0xA0, g: 0xA0, b: 0xA0 }],
	[0xA1, { r: 0xA1, g: 0xA1, b: 0xA1 }],
	[0xA2, { r: 0xA2, g: 0xA2, b: 0xA2 }],
	[0xA3, { r: 0xA3, g: 0xA3, b: 0xA3 }],
	[0xA4, { r: 0xA4, g: 0xA4, b: 0xA4 }],
	[0xA5, { r: 0xA5, g: 0xA5, b: 0xA5 }],
	[0xA6, { r: 0xA6, g: 0xA6, b: 0xA6 }],
	[0xA7, { r: 0xA7, g: 0xA7, b: 0xA7 }],
	[0xA8, { r: 0xA8, g: 0xA8, b: 0xA8 }],
	[0xA9, { r: 0xA9, g: 0xA9, b: 0xA9 }],
	[0xAA, { r: 0xAA, g: 0xAA, b: 0xAA }],
	[0xAB, { r: 0xAB, g: 0xAB, b: 0xAB }],
	[0xAC, { r: 0xAC, g: 0xAC, b: 0xAC }],
	[0xAD, { r: 0xAD, g: 0xAD, b: 0xAD }],
	[0xAE, { r: 0xAE, g: 0xAE, b: 0xAE }],
	[0xAF, { r: 0xAF, g: 0xAF, b: 0xAF }],
	[0xB0, { r: 0xB0, g: 0xB0, b: 0xB0 }],
	[0xB1, { r: 0xB1, g: 0xB1, b: 0xB1 }],
	[0xB2, { r: 0xB2, g: 0xB2, b: 0xB2 }],
	[0xB3, { r: 0xB3, g: 0xB3, b: 0xB3 }],
	[0xB4, { r: 0xB4, g: 0xB4, b: 0xB4 }],
	[0xB5, { r: 0xB5, g: 0xB5, b: 0xB5 }],
	[0xB6, { r: 0xB6, g: 0xB6, b: 0xB6 }],
	[0xB7, { r: 0xB7, g: 0xB7, b: 0xB7 }],
	[0xB8, { r: 0xB8, g: 0xB8, b: 0xB8 }],
	[0xB9, { r: 0xB9, g: 0xB9, b: 0xB9 }],
	[0xBA, { r: 0xBA, g: 0xBA, b: 0xBA }],
	[0xBB, { r: 0xBB, g: 0xBB, b: 0xBB }],
	[0xBC, { r: 0xBC, g: 0xBC, b: 0xBC }],
	[0xBD, { r: 0xBD, g: 0xBD, b: 0xBD }],
	[0xBE, { r: 0xBE, g: 0xBE, b: 0xBE }],
	[0xBF, { r: 0xBF, g: 0xBF, b: 0xBF }],
	[0xC0, { r: 0xC0, g: 0xC0, b: 0xC0 }],
	[0xC1, { r: 0xC1, g: 0xC1, b: 0xC1 }],
	[0xC2, { r: 0xC2, g: 0xC2, b: 0xC2 }],
	[0xC3, { r: 0xC3, g: 0xC3, b: 0xC3 }],
	[0xC4, { r: 0xC4, g: 0xC4, b: 0xC4 }],
	[0xC5, { r: 0xC5, g: 0xC5, b: 0xC5 }],
	[0xC6, { r: 0xC6, g: 0xC6, b: 0xC6 }],
	[0xC7, { r: 0xC7, g: 0xC7, b: 0xC7 }],
	[0xC8, { r: 0xC8, g: 0xC8, b: 0xC8 }],
	[0xC9, { r: 0xC9, g: 0xC9, b: 0xC9 }],
	[0xCA, { r: 0xCA, g: 0xCA, b: 0xCA }],
	[0xCB, { r: 0xCB, g: 0xCB, b: 0xCB }],
	[0xCC, { r: 0xCC, g: 0xCC, b: 0xCC }],
	[0xCD, { r: 0xCD, g: 0xCD, b: 0xCD }],
	[0xCE, { r: 0xCE, g: 0xCE, b: 0xCE }],
	[0xCF, { r: 0xCF, g: 0xCF, b: 0xCF }],
	[0xD0, { r: 0xD0, g: 0xD0, b: 0xD0 }],
	[0xD1, { r: 0xD1, g: 0xD1, b: 0xD1 }],
	[0xD2, { r: 0xD2, g: 0xD2, b: 0xD2 }],
	[0xD3, { r: 0xD3, g: 0xD3, b: 0xD3 }],
	[0xD4, { r: 0xD4, g: 0xD4, b: 0xD4 }],
	[0xD5, { r: 0xD5, g: 0xD5, b: 0xD5 }],
	[0xD6, { r: 0xD6, g: 0xD6, b: 0xD6 }],
	[0xD7, { r: 0xD7, g: 0xD7, b: 0xD7 }],
	[0xD8, { r: 0xD8, g: 0xD8, b: 0xD8 }],
	[0xD9, { r: 0xD9, g: 0xD9, b: 0xD9 }],
	[0xDA, { r: 0xDA, g: 0xDA, b: 0xDA }],
	[0xDB, { r: 0xDB, g: 0xDB, b: 0xDB }],
	[0xDC, { r: 0xDC, g: 0xDC, b: 0xDC }],
	[0xDD, { r: 0xDD, g: 0xDD, b: 0xDD }],
	[0xDE, { r: 0xDE, g: 0xDE, b: 0xDE }],
	[0xDF, { r: 0xDF, g: 0xDF, b: 0xDF }],
	[0xE0, { r: 0xE0, g: 0xE0, b: 0xE0 }],
	[0xE1, { r: 0xE1, g: 0xE1, b: 0xE1 }],
	[0xE2, { r: 0xE2, g: 0xE2, b: 0xE2 }],
	[0xE3, { r: 0xE3, g: 0xE3, b: 0xE3 }],
	[0xE4, { r: 0xE4, g: 0xE4, b: 0xE4 }],
	[0xE5, { r: 0xE5, g: 0xE5, b: 0xE5 }],
	[0xE6, { r: 0xE6, g: 0xE6, b: 0xE6 }],
	[0xE7, { r: 0xE7, g: 0xE7, b: 0xE7 }],
	[0xE8, { r: 0xE8, g: 0xE8, b: 0xE8 }],
	[0xE9, { r: 0xE9, g: 0xE9, b: 0xE9 }],
	[0xEA, { r: 0xEA, g: 0xEA, b: 0xEA }],
	[0xEB, { r: 0xEB, g: 0xEB, b: 0xEB }],
	[0xEC, { r: 0xEC, g: 0xEC, b: 0xEC }],
	[0xED, { r: 0xED, g: 0xED, b: 0xED }],
	[0xEE, { r: 0xEE, g: 0xEE, b: 0xEE }],
	[0xEF, { r: 0xEF, g: 0xEF, b: 0xEF }],
	[0xF0, { r: 0xF0, g: 0xF0, b: 0xF0 }],
	[0xF1, { r: 0xF1, g: 0xF1, b: 0xF1 }],
	[0xF2, { r: 0xF2, g: 0xF2, b: 0xF2 }],
	[0xF3, { r: 0xF3, g: 0xF3, b: 0xF3 }],
	[0xF4, { r: 0xF4, g: 0xF4, b: 0xF4 }],
	[0xF5, { r: 0xF5, g: 0xF5, b: 0xF5 }],
	[0xF6, { r: 0xF6, g: 0xF6, b: 0xF6 }],
	[0xF7, { r: 0xF7, g: 0xF7, b: 0xF7 }],
	[0xF8, { r: 0xF8, g: 0xF8, b: 0xF8 }],
	[0xF9, { r: 0xF9, g: 0xF9, b: 0xF9 }],
	[0xFA, { r: 0xFA, g: 0xFA, b: 0xFA }],
	[0xFB, { r: 0xFF, g: 0x00, b: 0x00 }],
	[0xFC, { r: 0xFF, g: 0x00, b: 0x00 }],
	[0xFD, { r: 0xFF, g: 0x00, b: 0x00 }],
	[0xFE, { r: 0xFF, g: 0x00, b: 0xFF }],
	[0xFF, { r: 0xFF, g: 0xFF, b: 0x00 }],
]);

// https://www.w3.org/TR/PNG/#11PLTE
const bytes = [];
for (const [index, { r, g, b }] of colorMap) {
	bytes.push(r, g, b);
}

saveChunk({
	buffer: Buffer.from(bytes),
	chunkName: 'PLTE',
	fileName: 'plte-waypoint',
});
